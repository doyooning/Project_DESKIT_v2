## 목차

- [프로젝트 개요 및 팀 소개](#프로젝트-개요-및-팀-소개)
- [기획 과정](#기획-과정)
- [기술 스택 및 시스템 설계](#기술-스택-및-시스템-설계)
- [데이터 모델링 및 설계](#데이터-모델링-및-설계)
- [핵심 기능 구현](#핵심-기능-구현)
- [일정 관리 및 팀 협업](#일정-관리-및-팀-협업)
- [프로젝트 시연 영상](#프로젝트-시연-영상)
- [트러블슈팅 및 개발 후기](#트러블슈팅-및-개발-후기)


## 프로젝트 개요 및 팀 소개

| **항목**      | **내용**                                                                                                                                                                       |
|-------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **프로젝트 개요** | DESKIT: 데스크테리어 전문 라이브 커머스 플랫폼                                                                                                                                                |
| **개발 인원**   | 총 4명                                                                                                                                                                         |
| **담당 역할**   | **고하원(팀장)** <br> - 프론트 화면 설계 및 상품 관련 기능 개발 <br> **김도윤** <br> - 회원, AI 적용, 관리자 상담 기능 개발 <br> **박용헌** <br> - 서버 구조 설계 및 실시간 채팅 기능 개발 <br> **주장우** <br> - 회의록 작성 및 라이브 방송 기능 개발 |
| **개발 기간**   | 6주 (2025-12-04 ~ 2026-01-16)                                                                                                                                                 |

## 기획 과정
### 주제 선정
1. 국내 라이브 커머스 시장 규모는 점차 확대되고 있는 추세
2. 데스크테리어 시장 성장 전망
   - 트렌드 이동: 집 꾸미기 -> **책상 꾸미기**
   - 도시화 및 1인 가구 증가 -> **개인 공간** 및 **감성 소비** 증가
   - **실사용 모습**, 공간 연출, 소재 및 디테일 중요성 증가
   - 경험 중심 -> 체험형 매장 확산, **사용 경험이 구매 결정에 큰 영향**
> 데스크테리어 시장의 성장 잠재력 + 라이브 커머스의 실시간 소통 및 시연 강점 <br>
> = 새로운 시장 기회

### 타당성 조사
설문조사 진행: 11개 문항, 응답자 69명
1. 데스크테리어 제품 온라인 구매시, 가장 아쉬운 점은?
    - **실제 색감을 알기 어려움** > **크기 등 공간감이 가늠되지 않음** > ... 
2. 데스크테리어 제품을 판매자가 실시간으로 시연하고, 채팅으로 질문에 답변해주는 서비스가 있다면 이용해볼 의향이 있는지?
    - **이용해볼 의향이 있다** > 잘 모르겠다 > ...

> 데스크테리어 + 라이브 커머스, 이용해볼 의향이 있다는 긍정적인 결과 확인

## 기술 스택 및 시스템 설계
![](https://velog.velcdn.com/images/doyooning/post/d58c5997-b479-4b98-8be7-a683be8ce3b3/image.png)

## 데이터 모델링 및 설계
![](https://velog.velcdn.com/images/doyooning/post/517807b3-ba53-4662-bb50-2e11434cd0cb/image.png)


## 핵심 기능 구현
### 방송 송출 기능(라이브 스트리밍)

```
방송 예약 -> 방송 시작 -> 방송 시청, 실시간 채팅 -> 방송 종료, VOD 생성
```

: OpenVidu 라이브러리 활용

 **OpenVidu** <br>
WebRTC 기반 라이브 스트리밍 / 화상 세션 관리 플랫폼 <br>
서버에서 세션 생성 / 토큰 발급 / 녹화 제어

### 방송 상태 전환 기능


: SSE 활용

**SSE(Server-Sent Events)** <br>
서버가 클라이언트에게 실시간으로 데이터를 스트리밍하는 기술 <br>
WebSocket과 달리 **단방향 통신**

### 실시간 채팅 기능

```
채팅 작성 및 전송 -> 금칙어 여부 확인 -> 데이터 저장 -> 최종 전송
```

: WebSocket, STOMP 활용

**1. WebSocket**
: 웹 브라우저와 서버 간 양방향 실시간 통신을 가능하게 해주는 프로토콜
: 클라이언트에서 요청(Request) -> 서버에서 수락(Handshake) -> WebSocket 연결 

**2. STOMP**
: WebSocket 위에서 동작하는 메세징 프로토콜 <br>
Pub/Sub 모델을 기반으로 메시지 형식을 정의
: 현재 프로젝트는 단일 서버이나, 멀티 서버로의 확장성을 고려하여 STOMP 사용


### 금칙어 필터링


: Aho-Corasick Trie 구조로 빌드

**Aho-Corasick Trie** <br>
주어진 텍스트에서 **다수의 패턴을 동시에 검색**하는데 최적화된 **문자열 검색 알고리즘** <br>

1:1 비교 방식이 아니라 금칙어들을 **Trie** 형태로 미리 구축, <br>
텍스트를 한 번만 스캔하여 모든 금칙어들을 검색

### CS 챗봇

```
회원 문의 -> 이 질문에 '정확한 답'을 줄 수 있는가?
            (정확한 답 = 정책 문서를 근거로 답변)
                            |
                    O       |       X
                   RAG           일반 LLM
               임베딩된 문서      재차 질문
                내에서 답변      ("좀 더 구체적으로..")         
```

: Spring AI + OpenAI API 사용하여 RAG 기반 답변

**RAG** <br>
= 검색을 통한 보강 생성 <br>
RAG 기반으로 챗봇은 임베딩된 정책 문서 내에서 정확한 답변을 제공

![](https://velog.velcdn.com/images/doyooning/post/73804a38-4cc2-406f-9344-d44bfa479c1b/image.png)


### 사업계획서 AI 심사

```
판매자 회원가입 -> 최초 가입시 사업계획서 제출 -> 회원가입 요청 완료 시 AI 심사 결과 전송 -> 관리자 확인, 최종 심사 후 결과 공지 
```

: Spring AI 제공 Tool Calling 기능 활용

**Tool Calling** <br>
AI 모델이 특정 API, 데이터베이스 등 외부 도구를 직접 호출해 결과를 받아오는 기능 <br>

판매자 신규가입시 Tool Calling -> DB에서 사업계획서 조회 -> 지정된 객체 형태로 결과 생성


## 일정 관리 및 팀 협업
### 간트차트 및 칸반보드 활용
![](https://velog.velcdn.com/images/doyooning/post/0251512d-2547-487c-88b0-364b42c882b8/image.png)
![](https://velog.velcdn.com/images/doyooning/post/d26319a2-4600-483d-8c10-ca1845b2ba74/image.png)

### WBS 작성
![](https://velog.velcdn.com/images/doyooning/post/9996e599-e105-42a4-bd1c-cafa2d7d5b73/image.png)

### Git Flow

```
feature/issue명 Branch 생성
            |
      develop에 병합
            |
        main에 병합
            |
         최종 배포
```

## 프로젝트 시연 영상

[DESKIT_주요기능](https://drive.google.com/file/d/1oxaB-RDMtOUjrHZP19cEsVKlyyFntf3W/view?usp=sharing)


## 트러블슈팅 및 개발 후기
### 1. 라이브 방송 관련

| **문제 상황**        | **OpenVidu 연동 오류**                                                                      | **실시간 채팅 불가**                                                                            |
|------------------|-----------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| **증상**           | 서버 배포 과정 중 <br> - 라이브 방송 연결 실패 <br> - 녹화 기능 작동 불가                                       | WebSocket 요청 오류 <br> - 지속적인 404 오류 발생 <br> - 401, 403 등 권한 문제 발생                         |
| **원인 및 해결방법**    | **로컬 환경에서의 설정이 남아 있음** <br> 배포 환경에 맞게 Nginx 프록시 설정 변경 <br> IP - 포트 - 설정파일 - 환경변수 점검 <br> | **URI 매핑 불일치 및 Security 설정 충돌** <br> 하드코딩된 URI 접두사 제거 <br> Security의 권한 체크에서 해당 요청 배제 <br> |
| **깨달은 점**        | 확인 포인트를 명확히 해야 함 <br> 배포 환경을 고려한 개발이 이루어져야 함을 느낌 | 개발자 로그(log) 출력의 중요성을 체감 <br> 환경 변수를 활용한 동적 경로 관리의 중요성 <br> 분기 처리는 확실하게 분리하기  |

### 2. AI 적용 관련

| **문제 상황**        | **Spring AI 설정 관련 문제**                                                                                                                      | **챗봇 기능 관련 문제**                                                            |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
| **증상**           | 기능을 하나씩 만들 때마다 다른 기능에서 오류가 발생 <br> : '없는 메서드', '변수를 찾을 수 없음' 등                                                                              | 기능 분기(LLM/RAG) 문제 <br> : RAG로 답변해야 하나 일반 LLM으로 답변                          |
| **원인 및 해결방법**    | **Spring AI 버전과 의존성들이 충돌** <br> * Spring AI는 버전에 따라 변경이 많이 이루어져, 직접 패키지 구성을 확인하면서 기능을 제공하는지 확인함 <br> Spring AI 버전을 1.1.2로 고정, 적용 가능한 의존성 추가 | **프롬프팅 메시지와 내부 로직이 충돌** <br> 프롬프트를 간결하게 작성, 반드시 필요한 부분만 로직으로 구성 <br>       |
| **깨달은 점**        | 기능 구현 전, 사전 조사의 중요성 <br> 프로젝트 상황에 맞는 Trade-off 판단 <br> 기준은 공식 문서로 잡아야 함                                                                     | 프롬프팅 메시지에 의존한 결과 출력 지양 <br> 분기 포인트는 직접 로직 명확하게 작성 필요 |

### 향후 보완 계획

1. 다중 방송과 대용량 트래픽 처리
   - Auto Scaling과 로드 밸런싱
       : 트래픽 증가 시, 미디어 서버를 자동 증설
       : 멀티 서버에 맞는 로드 밸런싱 전략 적용
    
   - 부하 테스트 진행
       : 현재 한계 파악 -> 동시 접속자 증가 테스트 -> 병목 지점 파악 -> 해당 부분 설정 조정 및 개선

2. AI 성능 개선 및 적용 범위 확장
   - RAG 기반 답변 시 고려사항 <br>
      1. 정책 문서가 많아졌을 때의 검색 성능 <br>
         - 검색해야 할 임베딩 문서가 충분히 많은 경우, 프로젝트 환경에서 최적의 효과를 낼 수 있는 DB와 기술은 무엇인가?(ElasticSearch 등) <br>
      2. 벡터 유사도 검증 <br>
         - Threshold 기반 필터링에서 기준점을 어떤 방식으로 산정할 것인가? <br>
          현재 기본값(0.7) -> 실제 검색 결과 품질 평가 테스트(구간별 점수 분할) -> 최적 점수 결정 <br>
   - @Tool 기능을 활용한 CS 개선 <br>
       : 고객이 필요한 정보 요청 시, 검색 가능한 DB를 참조하여 해당 정보 제공 기능 <br>


## 참고
- 접속 주소: `https://ssg.deskit.o-r.kr` (NCP 서버 -> 로컬 마이그레이션, 26.01.23)
- AWS로 서버 이전 예정입니다.
